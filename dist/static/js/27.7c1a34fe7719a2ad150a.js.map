{"version":3,"sources":["webpack:///static/js/27.7c1a34fe7719a2ad150a.js","webpack:///./src/util/common_b.js?db38***","webpack:///./src/components/questionTemp/common/patient.vue","webpack:///patient.vue","webpack:///./src/util/config.js","webpack:///./src/components/questionTemp/common/patient.vue?ec2d","webpack:///./src/components/questionTemp/common/patient.vue?5096","webpack:///./src/components/questionTemp/common/patient.vue?49a7"],"names":["webpackJsonp","204","module","__webpack_exports__","__webpack_require__","$","tip_msg","msg","time","callbackFun","layer","openLayer","content","fun","open","style","shade","end","ajaxAsync","options","hideLayer","undefined","cookie","headers","Authorization","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_promise___default","a","resolve","reject","flag","url","indexOf","ajax","type","cache","Math","random","dataType","beforeSend","request","isLogin","setRequestHeader","contentType","content_type","timeout","async","data","complete","noHideLoading","closeAll","success","result","error_code","error","XMLHttpRequest","textStatus","errorThrown","is_failure","status","obj","JSON","parse","responseText","code","logout","showFailure","message","close","z","e","path","expires","window","sessionStorage","getItem","exec_iframe_login","top","location","href","getPlatformUrl","getUrlParam","name","param","substring","r","substr","length","decodeURIComponent","transPageObj","transPage","unescape","transFun","transLogoutFun","exec_obj","document","createElement","id","src","display","body","appendChild","parent","getOrganCode","calculateAge","age","ageInfo","year","month","day","replace","yearFlag","monthFlag","dayFlag","yearEnd","monthEnd","transformBase64ToFile","base64Url","imageType","base64","split","binary","atob","array","i","push","charCodeAt","bigImge","Blob","Uint8Array","form","forms","formData","FormData","timestamp","Date","getTime","append","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_regenerator__","n","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_regenerator___default","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_asyncToGenerator__","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_asyncToGenerator___default","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_promise__","__WEBPACK_IMPORTED_MODULE_4_jquery_cookie__","_ref","mark","_callee","wrap","_context","prev","next","sent","t0","format","abrupt","stop","this","call","228","exports","Component","511","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_extends__","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_extends___default","__WEBPACK_IMPORTED_MODULE_3_vuex__","__WEBPACK_IMPORTED_MODULE_4__components_questionTree_questionNode_questionNodeMix__","__WEBPACK_IMPORTED_MODULE_6__util_common_b__","__WEBPACK_IMPORTED_MODULE_7__util_config__","mixins","props","mounted","saveValue","node","currNode","uniqueId","mode","isTreeDisabled","questionType","setInitData","setInitRadio","computed","getValue","svl","find","sv","isShow","selfPropagationId","optionContent","item","timeFormat","isDisabled","childTemplateId","paperTemplateId","methods","apply","arguments","map","BED_NO","MRN","PAT_INDEX_NO","PATIENT_NAME","SEX","WARD_CODE","DEPT_CODE","ADMISSTION_TIME","BIRTHYDAY","VISIT_CARD_NO","EMC_PATIENT_NAME","EMC_DIAGNOSE","DOCTOR_RECEPTION_TIME","patient","ageHis","noAgeHis","calculateNursingClass","nursingClass","tree","$emit","optionList","getDiagnosis","_ref2","_callee2","resultsArr","_context2","diagTypeCodeList","AD","organCode","patIndexNo","forEach","res","index","diagName","_this","ADMITION_WAY","CLASSIFICATION","selOp","op","relateValue","checkRadio","checkInputUnit","event","currentTarget","nursingInfo","551","d","DIAGTYPE","TD","569","version","sources","names","mappings","file","sourceRoot","593","locals","678","render","_vm","_h","$createElement","_c","_self","staticClass","aliasType","width","nodeWidth","margin-left","_v","_s","_f","staticStyle","color","attrs","title","_e","_l","implantStyle","height","padding-right","unitList","unitName","margin","min-width","maxLength","disabled","domProps","getValueById","on","input","$event","rows","text-decoration","it","class","active","isUnitCodeSel","unitCode","click","checkRadioUnit","isIdSelected","optionId","staticRenderFns"],"mappings":"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","file":"static/js/27.7c1a34fe7719a2ad150a.js","sourcesContent":["webpackJsonp([27],{\n\n/***/ 204:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function($) {/* unused harmony export tip_msg */\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = openLayer;\n/* unused harmony export confirm_g */\n/* unused harmony export ajax */\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = ajaxAsync;\n/* unused harmony export logout */\n/* unused harmony export getPlatformUrl */\n/* harmony export (immutable) */ __webpack_exports__[\"e\"] = getUrlParam;\n/* unused harmony export exec_iframe */\n/* unused harmony export exec_iframe_login */\n/* unused harmony export getSysTime */\n/* unused harmony export setUserInfo */\n/* harmony export (immutable) */ __webpack_exports__[\"d\"] = getOrganCode;\n/* harmony export (immutable) */ __webpack_exports__[\"f\"] = calculateAge;\n/* harmony export (immutable) */ __webpack_exports__[\"c\"] = transformBase64ToFile;\n/* unused harmony export getUserInfo */\n/* unused harmony export getPatientSourceType */\n/* unused harmony export getBase64Image */\n/* unused harmony export convertImgToBase64 */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__ = __webpack_require__(61);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_regenerator__ = __webpack_require__(28);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_regenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_regenerator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_asyncToGenerator__ = __webpack_require__(27);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_asyncToGenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_asyncToGenerator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_promise__ = __webpack_require__(31);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_promise___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_promise__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_jquery_cookie__ = __webpack_require__(33);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_jquery_cookie___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_jquery_cookie__);\n\n\n\n\n\n\nfunction tip_msg(msg, time, callbackFun) {\n  layer.msg(msg || \"操作成功！\", {\n    time: time || 1000\n  }, function () {\n    if (callbackFun) {\n      callbackFun();\n    }\n  });\n}\n\nfunction openLayer(content, time, fun) {\n  return layer.open({\n    style: 'background-color:rgba(0,0,0,0.8);color:white;max-width:70%;width:auto;border-radius: 4px;',\n    shade: 'background-color: rgba(0,0,0,0)',\n    content: content || \"error\",\n    time: time || 2000,\n    end: function end() {\n      if (fun) {\n        fun();\n      }\n    }\n  });\n}\n\nfunction confirm_g(option) {\n  option = option || {};\n  option.width = option.width || '500px';\n  option.content = option.content || '确定要删除?';\n  var index = layer.open({\n    type: 1,\n    title: option.title || '删除',\n    area: option.height ? [option.width, option.height] : option.width,\n    shadeClose: true,\n    content: '    <div id=\"pop-content-del-layer01\">' + '        <div class=\"am-msg-lg-info\">' + '            <div class=\"inner\">' + '                <i class=\"i-question-lg\"></i>' + '                <h3>' + option.content + '</h3>' + '            </div>' + '        </div>' + '        <div class=\"am-btn-area\">' + '            <a class=\"am-pop-btn cancle\">取消</a>' + '            <a class=\"am-pop-btn am-btn-confirm\">确定</a>' + '        </div>' + '    </div>'\n  });\n  $('#pop-content-del-layer01 .cancle').off(\"click\");\n  $('#pop-content-del-layer01 .am-btn-confirm').off(\"click\");\n  $('#pop-content-del-layer01 .cancle').on('click', function () {\n    if (typeof option.cancle == 'function') {\n      option.cancle(index);\n    }\n  });\n  $('#pop-content-del-layer01 .am-btn-confirm').on('click', function () {\n    if (typeof option.yes == 'function') {\n      option.yes(index);\n    }\n  });\n}\n\nfunction ajax(options) {\n  if ($.cookie(\"_token_\")) {\n    options.headers = {\n      \"Authorization\": \"Bearer \" + $.cookie(\"_token_\")\n    };\n  } else {\n    options.headers = {};\n  }\n  var flag = '?';\n  if (options.url.indexOf('?') > -1) {\n    flag = '&';\n  }\n  $.ajax({\n    type: options.type || \"post\",\n    url: \"/\" + options.url + (options.cache ? '' : flag + \"random=\" + Math.random()),\n    dataType: options.dataType || \"json\",\n    beforeSend: function beforeSend(request) {\n      if (!options.isLogin) {\n        request.setRequestHeader(\"Authorization\", \"Bearer \" + $.cookie(\"_token_\"));\n      }\n    },\n    contentType: options.content_type || \"application/json\",\n    timeout: options.timeout || 10000,\n    async: options.async != undefined ? options.async : true,\n    data: options.data || {},\n    headers: options.headers,\n    complete: function complete() {\n      if (!options.noHideLoading) {\n        layer.closeAll('loading');\n      }\n    },\n    success: function success(result) {\n      if (!options.noHideLoading) {\n        layer.closeAll('loading');\n      }\n      if (result) {\n        if (result.error_code || result.error_code == \"\") {\n          if (options.failure) {\n            options.failure(result);\n          } else {\n            openLayer(result.error_info);\n          }\n        } else {\n          _callSuccess(options.callback, result);\n        }\n      } else {\n        _callSuccess(options.callback, result);\n      }\n    },\n    error: function error(XMLHttpRequest, textStatus, errorThrown) {\n      if (!options.noHideLoading) {\n        layer.closeAll('loading');\n      }\n      if (options.hideLayer) {\n        layer.closeAll();\n      }\n      if (XMLHttpRequest.status == '500' || XMLHttpRequest.status == '401') {\n        var obj = JSON.parse(XMLHttpRequest.responseText);\n\n\n        if (obj.code == '10000') {\n          openLayer('系统异常，请稍后再试！');\n        } else if (obj.code == '20401' || obj.code == \"10007\") {\n          tip_msg(\"请重新登录！\", null, function () {\n            logout();\n          });\n        } else if (obj.error == \"invalid_token\") {\n          logout();\n        } else {\n          _callError(options.failure, obj);\n        }\n      } else {\n        layer.close();\n        layer.open({\n          type: 1,\n          title: '提示',\n          area: ['480px', ''],\n          shadeClose: true,\n          content: '<div>' + '<h3 class=\"health-score\">调用数据失败，请稍后再试！</h3>' + '</div>'\n        });\n        _callError(options.failure, obj);\n      }\n    }\n  });\n}\n\nfunction _callSuccess(callback, result) {\n  if (typeof callback == 'function') {\n    callback(result);\n  }\n}\n\nfunction _callError(failure, errorMessage) {\n  if (typeof failure == 'function') {\n    failure(errorMessage);\n  } else {\n    openLayer(errorMessage.message);\n  }\n}\n\nvar z;\nfunction ajaxAsync(options) {\n  options.hideLayer = options.hideLayer == undefined ? true : options.hideLayer;\n  if ($.cookie(\"_token_\")) {\n    options.headers = {\n      \"Authorization\": \"Bearer \" + $.cookie(\"_token_\")\n    };\n  } else {\n    options.headers = {};\n  }\n\n  return new __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_promise___default.a(function (resolve, reject) {\n    var flag = '?';\n    if (options.url.indexOf('?') > -1) {\n      flag = '&';\n    }\n    $.ajax({\n      type: options.type || \"post\",\n      url: \"/\" + options.url + (options.cache ? '' : flag + \"random=\" + Math.random()),\n      cache: options.cache || false,\n      dataType: options.dataType || \"json\",\n      beforeSend: function beforeSend(request) {\n        if (!options.isLogin) {\n          request.setRequestHeader(\"Authorization\", \"Bearer \" + $.cookie(\"_token_\"));\n        }\n      },\n      contentType: options.content_type || \"application/json\",\n      timeout: options.timeout || 10000,\n      async: options.async != undefined ? options.async : true,\n      data: options.data || {},\n      headers: options.headers,\n      complete: function complete() {\n        if (!options.noHideLoading) {\n          layer.closeAll('loading');\n        }\n      },\n      success: function success(result) {\n        if (!options.noHideLoading) {\n          layer.closeAll('loading');\n        }\n        if (result) {\n          if (result.error_code || result.error_code == \"\") {\n            reject(result);\n          } else {\n            resolve(result);\n          }\n        } else {\n          resolve(result);\n        }\n      },\n      error: function error(XMLHttpRequest, textStatus, errorThrown) {\n        if (!options.noHideLoading) {\n          layer.closeAll('loading');\n        }\n        if (options.hideLayer) {\n          layer.closeAll();\n        }\n        if (options.is_failure === 'first') {\n          reject(XMLHttpRequest);\n          return;\n        }\n        if (XMLHttpRequest.status == '500' || XMLHttpRequest.status == '401') {\n          var obj = JSON.parse(XMLHttpRequest.responseText);\n\n\n          if (obj.code == '10000') {\n            openLayer('系统异常，请稍后再试！');\n          } else if (obj.code == '20401' || obj.code == \"10007\") {\n            tip_msg(\"请重新登录！\", null, function () {\n              logout();\n            });\n          } else if (obj.error == \"invalid_token\") {\n            logout();\n          } else {\n            if (!options.showFailure) {\n              openLayer(obj.message);\n            }\n          }\n        } else {\n          try {\n            layer.close(z);\n          } catch (e) {}\n\n          openLayer('系统异常，请稍后再试！');\n        }\n        reject(XMLHttpRequest);\n      }\n    });\n  });\n}\n\nfunction logout() {\n  $.cookie(\"_id_\", \"\", {\n    path: '/',\n    expires: -1\n  });\n  $.cookie(\"_un_\", \"\", {\n    path: '/',\n    expires: -1\n  });\n  $.cookie(\"_ut_\", \"\", {\n    path: '/',\n    expires: -1\n  });\n  $.cookie(\"_token_\", \"\", {\n    path: '/',\n    expires: -1\n  });\n\n  if (window.sessionStorage.getItem(\"_transLogout_\")) {\n    exec_iframe_login();\n  } else {\n    window.top.location.href = getPlatformUrl() + \"/user/html/login.html\";\n  }\n}\n\nfunction getPlatformUrl() {\n  var href = void 0;\n  try {\n    href = window.top.location.href;\n  } catch (e) {\n    href = window.location.href;\n  }\n  return getUrlParam('platformUrl', href) || $.cookie(\"_platformUrl_\");\n}\n\nfunction getUrlParam(name, href) {\n  var result = \"\";\n  var url = href || window.location.href;\n  if (url.indexOf(\"?\") > -1) {\n    var param = url.substring(url.indexOf(\"?\") + 1);\n    name += \"=\";\n    if (param.indexOf(name) > -1) {\n      var r = param.substr(param.indexOf(name) + name.length);\n      if (r.indexOf(\"&\") != -1) {\n        r = r.substring(0, r.indexOf(\"&\"));\n      }\n      result = r;\n    }\n  }\n  return decodeURIComponent(result);\n}\n\nfunction exec_iframe() {\n  if (getUrlParam(\"pageFrom\") == 'patientinfo') {\n    var transPage = unescape(getUrlParam(\"transPage\"));\n    var transFun = getUrlParam(\"transFun\");\n    if (typeof exec_obj == 'undefined') {\n      var _exec_obj = document.createElement('iframe');\n      _exec_obj.id = 'transIframe';\n      _exec_obj.name = 'transIframe';\n      _exec_obj.src = transPage + \"?transFun=\" + transFun;\n      _exec_obj.style.display = 'none';\n      document.body.appendChild(_exec_obj);\n    } else {\n      exec_obj.src = transPage + \"?transFun=\" + transFun + '&random=' + Math.random();\n    }\n  } else {\n    var index = parent.layer.getFrameIndex(window.name);\n    parent.layer.close(index);\n  }\n}\n\nfunction exec_iframe_login() {\n  var transPageObj = JSON.parse(window.sessionStorage.getItem(\"_transLogout_\"));\n  var transPage = unescape(transPageObj.transPage);\n  var transFun = transPageObj.transLogoutFun;\n  if (typeof exec_obj == 'undefined') {\n    var _exec_obj2 = document.createElement('iframe');\n    _exec_obj2.id = 'transIframe';\n    _exec_obj2.name = 'transIframe';\n    _exec_obj2.src = transPage + \"?transFun=\" + transFun;\n    _exec_obj2.style.display = 'none';\n    document.body.appendChild(_exec_obj2);\n  } else {\n    exec_obj.src = transPage + \"?transFun=\" + transFun + '&random=' + Math.random();\n  }\n  if (typeof parent.exec_iframe_login == 'function') {\n    parent.exec_iframe_login();\n  }\n}\n\nvar getSysTime = function () {\n  var _ref = __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_regenerator___default.a.mark(function _callee() {\n    var time;\n    return __WEBPACK_IMPORTED_MODULE_1_babel_runtime_regenerator___default.a.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            time = \"\";\n            _context.prev = 1;\n            _context.next = 4;\n            return ajaxAsync({\n              url: 'enr2.0/sys/date',\n              type: 'post',\n              is_failure: 'first',\n              dataType: \"text\"\n            });\n\n          case 4:\n            time = _context.sent;\n            _context.next = 10;\n            break;\n\n          case 7:\n            _context.prev = 7;\n            _context.t0 = _context['catch'](1);\n\n            time = new Date().format('yyyy-MM-dd hh:mm:ss');\n\n          case 10:\n            return _context.abrupt('return', time);\n\n          case 11:\n          case 'end':\n            return _context.stop();\n        }\n      }\n    }, _callee, this, [[1, 7]]);\n  }));\n\n  return function getSysTime() {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nfunction setUserInfo() {\n  var token = getUrlParam(\"token\");\n  var transLogoutFun = getUrlParam(\"transLogoutFun\");\n  var transPage = getUrlParam(\"transPage\");\n  var organCode = getUrlParam(\"organCode\");\n  if (token) {\n    $.cookie(\"_token_\", token, {\n      path: '/',\n      expires: 10\n    });\n  }\n  if (organCode) {\n    window.sessionStorage.setItem(\"_organCode_\", organCode);\n  }\n  if (transLogoutFun) {\n    window.sessionStorage.setItem(\"_transLogout_\", __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()({ 'transPage': transPage, 'transLogoutFun': transLogoutFun }));\n    window.exec_iframe_login = exec_iframe_login;\n  }\n}\n\nfunction getOrganCode() {\n  return window.sessionStorage.getItem(\"_organCode_\") || getUrlParam('organCode');\n}\n\nfunction calculateAge(age) {\n  var ageInfo = {\n    year: '',\n    month: '',\n    day: '',\n    age: '' };\n\n  if (!age) {\n    ageInfo.year = 'adult';\n    ageInfo.age = '未知';\n    return ageInfo;\n  }\n\n  age = age.replace(/个/g, '');\n\n  var yearFlag = age.indexOf('岁');\n\n  var monthFlag = age.indexOf('月');\n\n  var dayFlag = age.indexOf('天');\n\n  var yearEnd = age.substring(yearFlag + 1, age.length);\n\n  var monthEnd = age.substring(monthFlag + 1, age.length);\n\n  if (yearFlag === -1 && monthFlag === -1 && dayFlag === -1 || yearFlag > -1 && monthFlag === -1 && dayFlag === -1 && !yearEnd) {\n    ageInfo.year = yearFlag > -1 ? age.substring(0, yearFlag) : age;\n\n    ageInfo.age = ageInfo.year + '岁';\n    return ageInfo;\n  }\n\n  if (yearFlag > -1 && monthFlag > -1 && dayFlag === -1 && !monthEnd || yearFlag > -1 && monthFlag === -1 && dayFlag === -1 && yearEnd) {\n    ageInfo.year = age.substring(0, yearFlag);\n    ageInfo.month = monthFlag > -1 ? age.substring(yearFlag + 1, monthFlag) : yearEnd;\n\n    ageInfo.age = ageInfo.year + '岁' + ageInfo.month + '个月';\n    return ageInfo;\n  }\n\n  if (yearFlag > -1 && monthFlag === -1 && dayFlag > -1) {\n    ageInfo.year = age.substring(0, yearFlag);\n    ageInfo.month = '0';\n    ageInfo.day = age.substring(yearFlag + 1, dayFlag);\n\n    ageInfo.age = ageInfo.year + '岁' + ageInfo.day + '天';\n    return ageInfo;\n  }\n\n  if (yearFlag > -1 && monthFlag > -1 && dayFlag > -1 || yearFlag > -1 && monthFlag > -1 && dayFlag === -1 && monthEnd) {\n    ageInfo.year = age.substring(0, yearFlag);\n    ageInfo.month = age.substring(yearFlag + 1, monthFlag);\n    ageInfo.day = dayFlag > -1 ? age.substring(monthFlag + 1, dayFlag) : monthEnd;\n\n    ageInfo.age = ageInfo.year + '岁' + ageInfo.month + '个月' + ageInfo.day + '天';\n    return ageInfo;\n  }\n\n  if (yearFlag === -1 && monthFlag > -1 && dayFlag === -1 && !monthEnd) {\n    ageInfo.year = '0';\n    ageInfo.month = age.substring(0, monthFlag);\n\n    ageInfo.age = ageInfo.month + '个月';\n    return ageInfo;\n  }\n\n  if (yearFlag === -1 && monthFlag > -1 && dayFlag > -1 || yearFlag === -1 && monthFlag > -1 && dayFlag === -1 && monthEnd) {\n    ageInfo.year = '0';\n    ageInfo.month = age.substring(0, monthFlag);\n    ageInfo.day = dayFlag > -1 ? age.substring(monthFlag + 1, dayFlag) : monthEnd;\n\n    ageInfo.age = ageInfo.month + '个月' + ageInfo.day + '天';\n    return ageInfo;\n  }\n\n  if (yearFlag === -1 && monthFlag === -1 && dayFlag > -1) {\n    ageInfo.year = '0';\n    ageInfo.month = '0';\n    ageInfo.day = age.substring(0, dayFlag);\n\n    ageInfo.age = ageInfo.day + '天';\n    return ageInfo;\n  }\n};\n\nfunction transformBase64ToFile(base64Url, imageType) {\n  var base64 = base64Url.split(',');\n\n  var binary = window.atob(base64.length > 1 ? base64[1] : base64[0]);\n  var array = [];\n  for (var i = 0; i < binary.length; i++) {\n    array.push(binary.charCodeAt(i));\n  }\n  var bigImge = new Blob([new Uint8Array(array)], { type: imageType });\n  var form = document.forms[0];\n  var formData = new FormData(form);\n  var timestamp = new Date().getTime();\n  formData.append('key', timestamp + '.png');\n  formData.append(\"imageName\", bigImge);\n  return formData;\n}\n\nfunction getUserInfo() {\n  return {\n    userId: $.cookie('_loginName_'),\n    userName: $.cookie('_staffName_')\n  };\n}\n\nfunction getPatientSourceType(pageFrom) {\n  var result = \"\";\n  if (pageFrom == 'patientinfo') {\n    result = 'IH';\n  } else if (pageFrom == 'emergencyNursing') {\n    result = 'ET';\n  } else {\n    result = 'OD';\n  }\n  return result;\n}\n\nfunction getBase64Image(img) {\n  var canvas = document.createElement(\"canvas\");\n  canvas.width = img.width;\n  canvas.height = img.height;\n  var ctx = canvas.getContext(\"2d\");\n  ctx.drawImage(img, 0, 0, img.width, img.height);\n  var ext = img.src.substring(img.src.lastIndexOf(\".\") + 1).toLowerCase();\n  var dataURL = canvas.toDataURL(\"image/\" + ext);\n  return dataURL;\n}\n\nfunction convertImgToBase64(url, outputFormat) {\n  return new __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_promise___default.a(function (resolve, reject) {\n    var canvas = document.createElement('CANVAS'),\n        ctx = canvas.getContext('2d'),\n        img = new Image();\n    img.crossOrigin = '*';\n    img.onload = function () {\n      canvas.height = img.height;\n      canvas.width = img.width;\n      ctx.drawImage(img, 0, 0);\n      var dataURL = canvas.toDataURL(outputFormat || 'image/png');\n\n      canvas = null;\n      resolve(dataURL);\n    };\n    img.src = url;\n  });\n}\n/* WEBPACK VAR INJECTION */}.call(__webpack_exports__, __webpack_require__(4)))\n\n/***/ }),\n\n/***/ 228:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(593)\n\nvar Component = __webpack_require__(26)(\n  /* script */\n  __webpack_require__(511),\n  /* template */\n  __webpack_require__(678),\n  /* scopeId */\n  \"data-v-4f2fecc0\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 511:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__ = __webpack_require__(28);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator__ = __webpack_require__(27);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_extends__ = __webpack_require__(166);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_extends__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_vuex__ = __webpack_require__(60);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__components_questionTree_questionNode_questionNodeMix__ = __webpack_require__(164);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__bus_js__ = __webpack_require__(163);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__util_common_b__ = __webpack_require__(204);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__util_config__ = __webpack_require__(551);\n\n\n\n\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'patient',\n    mixins: [__WEBPACK_IMPORTED_MODULE_4__components_questionTree_questionNode_questionNodeMix__[\"a\" /* default */]],\n    props: ['node', 'saveValue', 'mode'],\n    data: function data() {\n        return {};\n    },\n\n    mounted: function mounted() {\n        if (!this.saveValue[this.node.currNode.uniqueId] && !(this.mode == 'add' && this.isTreeDisabled)) {\n            if (this.node.currNode.questionType != 10) {\n                this.setInitData();\n            } else {\n                this.setInitRadio();\n            }\n        }\n    },\n    computed: __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_extends___default()({}, __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3_vuex__[\"b\" /* mapState */])(['patient', 'userfulWidth', 'showPrintCode']), {\n        getValue: function getValue() {\n            var node = this.node;\n            var uniqueId = node.currNode.uniqueId;\n            var svl = this.saveValue[uniqueId] && this.saveValue[uniqueId].find(function (sv) {\n                return sv.isShow && sv.selfPropagationId == node.currNode.selfPropagationId;\n            });\n            if (svl) {\n                return svl.optionContent;\n            } else {\n                if (node.currNode.questionType == 90) {\n                    return new Date().format(item.timeFormat);\n                } else {\n                    return \"\";\n                }\n            }\n        },\n        isDisabled: function isDisabled() {\n            return this.node.currNode.childTemplateId === 'PAT_INDEX_NO' || this.node.currNode.paperTemplateId === 'ORGAN_CODE';\n        }\n    }),\n    methods: {\n        setInitData: function () {\n            var _ref = __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee() {\n                var value, currNode, map, age;\n                return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee$(_context) {\n                    while (1) {\n                        switch (_context.prev = _context.next) {\n                            case 0:\n                                value = void 0;\n                                currNode = this.node.currNode;\n                                map = {\n                                    BED_NO: 'bedNo',\n                                    MRN: 'mrn',\n                                    PAT_INDEX_NO: 'patIndexNo',\n                                    PATIENT_NAME: 'name',\n                                    SEX: 'physiSexName',\n\n                                    WARD_CODE: 'wardName',\n                                    DEPT_CODE: 'deptName',\n                                    ADMISSTION_TIME: 'admissionTime',\n                                    BIRTHYDAY: 'birthDate',\n                                    VISIT_CARD_NO: 'visitCardNo',\n                                    EMC_PATIENT_NAME: 'patientName',\n                                    EMC_DIAGNOSE: 'diagnosis',\n                                    DOCTOR_RECEPTION_TIME: 'receptTreatDrTime'\n                                };\n\n                                if (currNode.childTemplateId === 'AGE') {\n                                    age = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_6__util_common_b__[\"f\" /* calculateAge */])(this.patient.ageHis);\n\n                                    if (age.noAgeHis) {\n                                        value = this.patient.age;\n                                    } else {\n                                        value = age.age;\n                                    }\n                                } else if (currNode.childTemplateId === 'NURSING_CLASS') {\n                                    value = this.calculateNursingClass(this.patient.nursingClass);\n                                } else if (currNode.childTemplateId === 'NURSING_CLASS') {\n                                    value = this.patient[map[currNode.childTemplateId]] || new Date().format('yyyy-MM-dd hh:mm:ss');\n                                } else {\n                                        value = this.patient[map[currNode.childTemplateId]] || '';\n                                    }\n                                this.tree.$emit('seleteInput', {\n                                    'node': this.node,\n                                    'item': currNode.optionList[0],\n                                    'value': value\n                                });\n\n                            case 5:\n                            case 'end':\n                                return _context.stop();\n                        }\n                    }\n                }, _callee, this);\n            }));\n\n            function setInitData() {\n                return _ref.apply(this, arguments);\n            }\n\n            return setInitData;\n        }(),\n\n        getDiagnosis: function () {\n            var _ref2 = __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee2() {\n                var resultsArr, result;\n                return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee2$(_context2) {\n                    while (1) {\n                        switch (_context2.prev = _context2.next) {\n                            case 0:\n                                _context2.next = 2;\n                                return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_6__util_common_b__[\"a\" /* ajaxAsync */])({\n                                    url: \"baseinfo2.0/inhospdiagnosis/inhospdiagnosis\",\n                                    dataType: \"json\",\n                                    type: \"get\",\n                                    data: {\n                                        diagTypeCodeList: __WEBPACK_IMPORTED_MODULE_7__util_config__[\"a\" /* DIAGTYPE */].AD,\n                                        organCode: __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_6__util_common_b__[\"e\" /* getUrlParam */])(\"organCode\"),\n                                        patIndexNo: this.patient.patIndexNo\n                                    }\n                                });\n\n                            case 2:\n                                resultsArr = _context2.sent;\n                                result = \"\";\n\n                                resultsArr && resultsArr.forEach(function (res, index) {\n                                    result += (index ? ',' : '') + res.diagName;\n                                });\n                                return _context2.abrupt('return', result);\n\n                            case 6:\n                            case 'end':\n                                return _context2.stop();\n                        }\n                    }\n                }, _callee2, this);\n            }));\n\n            function getDiagnosis() {\n                return _ref2.apply(this, arguments);\n            }\n\n            return getDiagnosis;\n        }(),\n\n        setInitRadio: function setInitRadio() {\n            var _this = this;\n\n            var currNode = this.node.currNode;\n            var map = {\n                ADMITION_WAY: 'admitWayCode',\n                CLASSIFICATION: 'triageLevel'\n            };\n            var selOp = this.node.currNode.optionList.find(function (op) {\n                return op.relateValue == _this.patient[map[currNode.childTemplateId]];\n            });\n            if (selOp) {\n                this.checkRadio(selOp);\n            }\n        },\n        checkRadio: function checkRadio(item) {\n            if (this.isTreeDisabled) {\n                return;\n            }\n            this.tree.$emit('seleteRadio', {\n                node: this.node,\n                item: item\n            });\n        },\n        checkInputUnit: function checkInputUnit(node, event) {\n            this.tree.$emit('seleteInput', {\n                'node': node,\n                'item': node.currNode,\n                'value': event.currentTarget.value\n            });\n        },\n\n        calculateNursingClass: function calculateNursingClass(nursingClass) {\n            var nursingInfo = '';\n            if (nursingClass == 0) {\n                nursingInfo = \"特级护理\";\n            } else if (nursingClass == 1) {\n                nursingInfo = \"一级护理\";\n            } else if (nursingClass == 2) {\n                nursingInfo = \"二级护理\";\n            } else if (nursingClass == 3) {\n                nursingInfo = \"三级护理\";\n            }\n            return nursingInfo;\n        }\n    }\n});\n\n/***/ }),\n\n/***/ 551:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return DIAGTYPE; });\n/* unused harmony export INIT_QUERY_TYPE */\n\nvar DIAGTYPE = {\n  AD: 6,\n  TD: 3 };\n\nvar INIT_QUERY_TYPE = {\n  LINK_LAST: \"LINK_LAST\",\n  RECORD_PERMISSTION: \"RECORD_PERMISSTION\",\n  SYSTEM_TIME: \"SYSTEM_TIME\",\n  SHARE_DATA: \"SHARE_DATA\" };\n\n/***/ }),\n\n/***/ 569:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(140)(true);\n// imports\n\n\n// module\nexports.push([module.i, \"\", \"\", {\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"file\":\"patient.vue\",\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 593:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(569);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(141)(\"1a1a248c\", content, true);\n\n/***/ }),\n\n/***/ 678:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"lv-inline\"\n  }, [(_vm.node.currNode.aliasType != 3) ? _c('div', {\n    staticClass: \"lv-item lv-title ttt\",\n    style: ({\n      'width': _vm.nodeWidth(_vm.node.currNode.style.width) + 'px',\n      'margin-left': '5px'\n    })\n  }, [_vm._v(_vm._s(_vm._f(\"showNodeName\")(_vm.node.currNode))), (_vm.showPrintCode) ? _c('span', {\n    staticStyle: {\n      \"color\": \"red\"\n    },\n    attrs: {\n      \"title\": _vm.node.currNode.uniqueId\n    }\n  }, [_vm._v(_vm._s(_vm.node.currNode.uniqueId))]) : _vm._e()]) : _vm._e(), _vm._v(\" \"), _c('div', {\n    staticClass: \"lv-inline\"\n  }, _vm._l((_vm.node.currNode.optionList), function(item) {\n    return _c('div', {\n      staticClass: \"lv-item\"\n    }, [\n      [(_vm.node.currNode.questionType != 10) ? [_c('div', {\n        staticClass: \"am-input-unit\"\n      }, [(item.implantStyle != 1) ? [(!item.style || item.style.height != 2) ? _c('input', {\n        staticClass: \"input-text\",\n        style: ({\n          'padding-right': item.unitList.length != 1 ? '0' : item.unitList[0].unitName.length * 12 + 10 + 'px',\n          'width': (item.style.width || 220) + 'px',\n          'margin-left': (item.style.margin || 0) + 'px',\n          'min-width': '220px'\n        }),\n        attrs: {\n          \"type\": \"text\",\n          \"maxLength\": item.style && item.style.maxLength || 100,\n          \"disabled\": \"disabled\"\n        },\n        domProps: {\n          \"value\": _vm.getValueById(item, _vm.node)\n        },\n        on: {\n          \"input\": function($event) {\n            _vm.checkInputUnit(item, _vm.node, $event)\n          }\n        }\n      }) : _vm._e(), _vm._v(\" \"), (item.style && item.style.height == 2) ? _c('textarea', {\n        staticClass: \"input-text input-textarea\",\n        style: ({\n          'padding-right': 0,\n          'width': (item.style.width || 220) + 'px',\n          'margin-left': (item.style.margin || 0) + 'px',\n        }),\n        attrs: {\n          \"rows\": \"4\",\n          \"maxLength\": item.style && item.style.maxLength || 100,\n          \"disabled\": _vm.isTreeDisabled\n        },\n        domProps: {\n          \"value\": _vm.getValueById(item, _vm.node)\n        },\n        on: {\n          \"input\": function($event) {\n            _vm.checkInputUnit(item, _vm.node, $event)\n          }\n        }\n      }) : _vm._e()] : _vm._e(), _vm._v(\" \"), (item.implantStyle == 1) ? [_c('span', {\n        style: ({\n          'margin-left': (item.style.margin || 0) + 'px',\n          'width': (item.style && item.style.width || 220) + 'px',\n          'text-decoration': 'underline'\n        })\n      }, [_vm._v(_vm._s(_vm.getValueById(item, _vm.node)))])] : _vm._e(), _vm._v(\" \"), (item.unitList.length == 1) ? _c('i', [_vm._v(_vm._s(item.unitList[0].unitName))]) : _vm._e()], 2), _vm._v(\" \"), (item.unitList.length > 1) ? [(_vm.showUnit) ? _c('div', {\n        staticClass: \"am-btn-rdo am-ml-10\"\n      }, _vm._l((item.unitList), function(it, index) {\n        return _c('a', {\n          class: {\n            active: _vm.isUnitCodeSel(_vm.node.currNode, item, it.unitCode)\n          },\n          on: {\n            \"click\": function($event) {\n              _vm.checkRadioUnit(_vm.node, item, it)\n            }\n          }\n        }, [_vm._v(_vm._s(it.unitName))])\n      })) : _vm._e()] : _vm._e()] : _vm._e(), _vm._v(\" \"), (_vm.node.currNode.questionType == 10) ? [_c('div', {\n        style: ({\n          'width': (item.style.width || 220) + 'px',\n          'margin-left': (item.style.margin || 0) + 'px',\n        }),\n        on: {\n          \"click\": function($event) {\n            _vm.checkRadio(item)\n          }\n        }\n      }, [_c('div', {\n        staticClass: \"am-ctr-native-rdo\",\n        class: {\n          active: _vm.isIdSelected(_vm.node.currNode, item.optionId), disabled: _vm.isTreeDisabled\n        }\n      }, [_c('span', [_vm._v(\" \" + _vm._s(_vm._f(\"showNodeName\")(item)))])])])] : _vm._e(), _vm._v(\" \"), (_vm.showPrintCode) ? _c('span', {\n        attrs: {\n          \"title\": item.optionId\n        }\n      }, [_vm._v(_vm._s(item.optionId))]) : _vm._e()]\n    ], 2)\n  }))])\n},staticRenderFns: []}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/27.7c1a34fe7719a2ad150a.js","import 'jquery.cookie';\r\n/*------------------------------弹出框----------------------------*/\r\n\r\n/*tip小黑框 常用于操作成功提示*/\r\nexport function tip_msg(msg, time, callbackFun) {\r\n  layer.msg(msg || \"操作成功！\", {\r\n    time: time || 1000,\r\n    /*offset: '20px'*/\r\n  }, function() {\r\n    if (callbackFun) {\r\n      callbackFun();\r\n    }\r\n  });\r\n}\r\n\r\n/*layer确定框 常用于错误提示*/\r\nexport function openLayer(content, time, fun) {\r\n  return layer.open({\r\n    style: 'background-color:rgba(0,0,0,0.8);color:white;max-width:70%;width:auto;border-radius: 4px;',\r\n    shade: 'background-color: rgba(0,0,0,0)',\r\n    content: content || \"error\",\r\n    time: time || 2000,\r\n    end: function() {\r\n      if (fun) {\r\n        fun();\r\n      }\r\n    }\r\n  });\r\n}\r\n\r\n/*\r\n *确认框 常用于删除确认\r\n *@param {object} option {width,height,title,content,yes(确定回调),cancle(取消回调)}\r\n */\r\nexport function confirm_g(option) {\r\n  option = option || {};\r\n  option.width = option.width || '500px';\r\n  option.content = option.content || '确定要删除?';\r\n  var index = layer.open({\r\n    type: 1,\r\n    title: option.title || '删除',\r\n    area: option.height ? [option.width, option.height] : option.width,\r\n    shadeClose: true,\r\n    content: '    <div id=\"pop-content-del-layer01\">' +\r\n      '        <div class=\"am-msg-lg-info\">' +\r\n      '            <div class=\"inner\">' +\r\n      '                <i class=\"i-question-lg\"></i>' +\r\n      '                <h3>' + option.content + '</h3>' +\r\n      '            </div>' +\r\n      '        </div>' +\r\n      '        <div class=\"am-btn-area\">' +\r\n      '            <a class=\"am-pop-btn cancle\">取消</a>' +\r\n      '            <a class=\"am-pop-btn am-btn-confirm\">确定</a>' +\r\n      '        </div>' +\r\n      '    </div>'\r\n  })\r\n  $('#pop-content-del-layer01 .cancle').off(\"click\");\r\n  $('#pop-content-del-layer01 .am-btn-confirm').off(\"click\");\r\n  $('#pop-content-del-layer01 .cancle').on('click', function() {\r\n    if (typeof(option.cancle) == 'function') {\r\n      option.cancle(index);\r\n    }\r\n  })\r\n  $('#pop-content-del-layer01 .am-btn-confirm').on('click', function() {\r\n    if (typeof(option.yes) == 'function') {\r\n      option.yes(index);\r\n    }\r\n  })\r\n}\r\n/*----------------------------------弹出框end---------------------------*/\r\n\r\n\r\n\r\n\r\n/*----------------------------------ajax相关----------------------------*/\r\nexport function ajax(options) {\r\n  if ($.cookie(\"_token_\")) {\r\n    options.headers = {\r\n      \"Authorization\": \"Bearer \" + $.cookie(\"_token_\")\r\n    };\r\n  } else {\r\n    options.headers = {};\r\n  }\r\n  let flag = '?';\r\n  if (options.url.indexOf('?') > -1) {\r\n    flag = '&'\r\n  }\r\n  $.ajax({\r\n    type: options.type || \"post\",\r\n    url: \"/\" + options.url + (options.cache ? '' : flag + \"random=\" + Math.random()),\r\n    dataType: options.dataType || \"json\",\r\n    beforeSend: function(request) {\r\n      if (!options.isLogin) {\r\n        request.setRequestHeader(\"Authorization\", \"Bearer \" + $.cookie(\"_token_\"));\r\n      }\r\n    },\r\n    contentType: options.content_type || \"application/json\",\r\n    timeout: options.timeout || 10000,\r\n    async: (options.async != undefined) ? options.async : true,\r\n    data: options.data || {},\r\n    headers: options.headers,\r\n    complete: function() {\r\n      if (!options.noHideLoading) {\r\n        layer.closeAll('loading');\r\n      }\r\n    },\r\n    success: function(result) {\r\n      if (!options.noHideLoading) {\r\n        layer.closeAll('loading');\r\n      }\r\n      if (result) {\r\n        if (result.error_code || result.error_code == \"\") {\r\n          if (options.failure) {\r\n            options.failure(result)\r\n          } else {\r\n            openLayer(result.error_info);\r\n          }\r\n        } else {\r\n          _callSuccess(options.callback, result);\r\n        }\r\n      } else {\r\n        _callSuccess(options.callback, result);\r\n      }\r\n    },\r\n    error: function(XMLHttpRequest, textStatus, errorThrown) {\r\n      if (!options.noHideLoading) {\r\n        layer.closeAll('loading');\r\n      }\r\n      if (options.hideLayer) {\r\n        layer.closeAll();\r\n      }\r\n      if (XMLHttpRequest.status == '500' || XMLHttpRequest.status == '401') {\r\n        var obj = JSON.parse(XMLHttpRequest.responseText);\r\n        //XMLHttpRequest.responseText\r\n\r\n        if (obj.code == '10000') {\r\n          // layer.open({\r\n          //   type: 1,\r\n          //   title: '提示',\r\n          //   area: ['480px', ''],\r\n          //   shadeClose: true, //点击遮罩关闭\r\n          //   content: '<div>' +\r\n          //     '<h3 class=\"health-score\">系统异常，请稍后再试！</h3>' +\r\n          //     '</div>'\r\n          // });\r\n           openLayer('系统异常，请稍后再试！');\r\n        } else if (obj.code == '20401' || obj.code == \"10007\") {\r\n          tip_msg(\"请重新登录！\", null, function() {\r\n            logout();\r\n          });\r\n        } else if (obj.error == \"invalid_token\") {\r\n          logout();\r\n        } else {\r\n          _callError(options.failure, obj);\r\n        }\r\n      } else {\r\n        layer.close();\r\n        layer.open({\r\n          type: 1,\r\n          title: '提示',\r\n          area: ['480px', ''],\r\n          shadeClose: true, //点击遮罩关闭\r\n          content: '<div>' +\r\n            '<h3 class=\"health-score\">调用数据失败，请稍后再试！</h3>' +\r\n            '</div>'\r\n        });\r\n        _callError(options.failure, obj);\r\n      }\r\n\r\n    }\r\n  })\r\n}\r\n\r\n/**\r\n * 调用成功之后 处理方法\r\n * @param callback(Function) 成功之后的回调方法\r\n * @param result 请求返回的结果集\r\n */\r\nfunction _callSuccess(callback, result) {\r\n  if (typeof(callback) == 'function') {\r\n    callback(result);\r\n  }\r\n}\r\n\r\n/**\r\n * 出现异常时调用异常信息\r\n * @param failure(Function) 失败时回调方法\r\n * @param errorMessage(String) 异常信息\r\n *\r\n */\r\nfunction _callError(failure, errorMessage) {\r\n  if (typeof(failure) == 'function') {\r\n    failure(errorMessage);\r\n  } else {\r\n    openLayer(errorMessage.message);\r\n  }\r\n}\r\n\r\n\r\nvar z;\r\nexport function ajaxAsync(options) {\r\n  options.hideLayer = options.hideLayer == undefined ? true : options.hideLayer;\r\n  if ($.cookie(\"_token_\")) {\r\n    options.headers = {\r\n      \"Authorization\": \"Bearer \" + $.cookie(\"_token_\")\r\n    };\r\n  } else {\r\n    options.headers = {};\r\n  }\r\n\r\n  return new Promise((resolve, reject) => {\r\n    //layer.load(2,{offset: ['50%','50%']});\r\n      let flag = '?';\r\n    if (options.url.indexOf('?') > -1) {\r\n      flag = '&'\r\n    }\r\n    $.ajax({\r\n      type: options.type || \"post\",\r\n      url: \"/\" + options.url + (options.cache ? '' : flag + \"random=\" + Math.random()),\r\n      cache: options.cache || false,\r\n      dataType: options.dataType || \"json\",\r\n      beforeSend: function(request) {\r\n        // layer.closeAll();\r\n        if (!options.isLogin) {\r\n          request.setRequestHeader(\"Authorization\", \"Bearer \" + $.cookie(\"_token_\"));\r\n        }\r\n      },\r\n      contentType: options.content_type || \"application/json\",\r\n      timeout: options.timeout || 10000,\r\n      async: (options.async != undefined) ? options.async : true,\r\n      data: options.data || {},\r\n      headers: options.headers,\r\n      complete: function() {\r\n        if (!options.noHideLoading) {\r\n          layer.closeAll('loading');\r\n        }\r\n      },\r\n      success: function(result) {\r\n        if (!options.noHideLoading) {\r\n          layer.closeAll('loading');\r\n        }\r\n        if (result) {\r\n          if (result.error_code || result.error_code == \"\") {\r\n            reject(result);\r\n          } else {\r\n            resolve(result);\r\n          }\r\n        } else {\r\n          resolve(result);\r\n        }\r\n      },\r\n      error: function(XMLHttpRequest, textStatus, errorThrown) {\r\n        if (!options.noHideLoading) {\r\n          layer.closeAll('loading');\r\n        }\r\n        if (options.hideLayer) {\r\n          layer.closeAll();\r\n        }\r\n         if (options.is_failure === 'first') {\r\n           reject(XMLHttpRequest);\r\n           return;\r\n         }\r\n        if (XMLHttpRequest.status == '500' || XMLHttpRequest.status == '401') {\r\n          var obj = JSON.parse(XMLHttpRequest.responseText);\r\n          //XMLHttpRequest.responseText\r\n\r\n          if (obj.code == '10000') {\r\n            // layer.open({\r\n            //   type: 1,\r\n            //   title: '提示',\r\n            //   area: ['480px', ''],\r\n            //   shadeClose: true, //点击遮罩关闭\r\n            //   content: '<div>' +\r\n            //     '<h3 class=\"health-score\">系统异常，请稍后再试！</h3>' +\r\n            //     '</div>'\r\n            // });\r\n            openLayer('系统异常，请稍后再试！');\r\n          } else if (obj.code == '20401' || obj.code == \"10007\") {\r\n            tip_msg(\"请重新登录！\", null, function() {\r\n              logout();\r\n            });\r\n          } else if (obj.error == \"invalid_token\") {\r\n            logout();\r\n          } else {\r\n            if (!options.showFailure) {\r\n              openLayer(obj.message);\r\n            }\r\n          }\r\n          //reject(obj);\r\n        } else {\r\n          try {\r\n            layer.close(z);\r\n          } catch (e) {}\r\n          // z = layer.open({\r\n          //   type: 1,\r\n          //   title: '提示',\r\n          //   area: ['480px', ''],\r\n          //   shadeClose: true, //点击遮罩关闭\r\n          //   content: '<div>' +\r\n          //     '<h3 class=\"health-score\">系统异常，请稍后再试！!</h3>' +\r\n          //     '</div>'\r\n          // });\r\n            openLayer('系统异常，请稍后再试！');\r\n          //reject(obj);\r\n        }\r\n        reject(XMLHttpRequest);\r\n      }\r\n    })\r\n  })\r\n}\r\n\r\n\r\n/*-----------------ajax相关end---------------*/\r\n\r\n/*退出登录*/\r\nexport function logout() {\r\n  $.cookie(\"_id_\", \"\", {\r\n    path: '/',\r\n    expires: -1\r\n  });\r\n  $.cookie(\"_un_\", \"\", {\r\n    path: '/',\r\n    expires: -1\r\n  });\r\n  $.cookie(\"_ut_\", \"\", {\r\n    path: '/',\r\n    expires: -1\r\n  });\r\n  $.cookie(\"_token_\", \"\", {\r\n    path: '/',\r\n    expires: -1\r\n  });\r\n  // \r\n  // pageFrom=patientinfo\r\n  if (window.sessionStorage.getItem(\"_transLogout_\")) {\r\n    exec_iframe_login();\r\n  } else {\r\n    window.top.location.href = getPlatformUrl() + \"/user/html/login.html\";\r\n  }\r\n}\r\n\r\n/*获取平台的地址*/\r\nexport function getPlatformUrl() {\r\n  let href;\r\n  try {\r\n    href = window.top.location.href\r\n  } catch (e) {\r\n    href = window.location.href\r\n  }\r\n  return getUrlParam('platformUrl', href) || $.cookie(\"_platformUrl_\");\r\n}\r\n\r\n/*获取url属性值*/\r\nexport function getUrlParam(name, href) {\r\n  var result = \"\";\r\n  var url = href || window.location.href;\r\n  if (url.indexOf(\"?\") > -1) {\r\n    var param = url.substring(url.indexOf(\"?\") + 1);\r\n    name += \"=\";\r\n    if (param.indexOf(name) > -1) {\r\n      var r = param.substr(param.indexOf(name) + name.length);\r\n      if (r.indexOf(\"&\") != -1) {\r\n        r = r.substring(0, r.indexOf(\"&\"));\r\n      }\r\n      result = r;\r\n    }\r\n  }\r\n  return decodeURIComponent(result);\r\n}\r\n\r\n//跨域iframe交互  关闭弹框\r\nexport function exec_iframe() {\r\n  if (getUrlParam(\"pageFrom\") == 'patientinfo') {\r\n    let transPage = unescape(getUrlParam(\"transPage\"));\r\n    let transFun = getUrlParam(\"transFun\");\r\n    if (typeof(exec_obj) == 'undefined') {\r\n      let exec_obj = document.createElement('iframe');\r\n      exec_obj.id = 'transIframe';\r\n      exec_obj.name = 'transIframe';\r\n      exec_obj.src = transPage + \"?transFun=\" + transFun;\r\n      exec_obj.style.display = 'none';\r\n      document.body.appendChild(exec_obj);\r\n    } else {\r\n      exec_obj.src = transPage + \"?transFun=\" + transFun + '&random=' + Math.random();\r\n    }\r\n  } else {\r\n    let index = parent.layer.getFrameIndex(window.name);\r\n    parent.layer.close(index);\r\n  }\r\n}\r\n//跳到登陆页\r\nexport function exec_iframe_login() {\r\n  var transPageObj = JSON.parse(window.sessionStorage.getItem(\"_transLogout_\"));\r\n  let transPage = unescape(transPageObj.transPage);\r\n  let transFun = transPageObj.transLogoutFun;\r\n  if (typeof(exec_obj) == 'undefined') {\r\n    let exec_obj = document.createElement('iframe');\r\n    exec_obj.id = 'transIframe';\r\n    exec_obj.name = 'transIframe';\r\n    exec_obj.src = transPage + \"?transFun=\" + transFun;\r\n    exec_obj.style.display = 'none';\r\n    document.body.appendChild(exec_obj);\r\n  } else {\r\n    exec_obj.src = transPage + \"?transFun=\" + transFun + '&random=' + Math.random();\r\n  }\r\n  if (typeof(parent.exec_iframe_login) == 'function') {\r\n    parent.exec_iframe_login();\r\n  }\r\n}\r\n\r\n\r\n/*获取服务器当前时间*/\r\nexport async function getSysTime() {\r\n    var time = \"\";\r\n    try {\r\n      time = await ajaxAsync({\r\n        url: 'enr2.0/sys/date',\r\n        type: 'post',\r\n        is_failure:'first',\r\n        dataType: \"text\",\r\n      })\r\n    } catch (e) {\r\n      time = new Date().format('yyyy-MM-dd hh:mm:ss');\r\n    }\r\n    return time;\r\n  }\r\n\r\n/*设置token等用户信息*/\r\nexport function setUserInfo() {\r\n  var token = getUrlParam(\"token\");\r\n  var transLogoutFun = getUrlParam(\"transLogoutFun\");\r\n  var transPage = getUrlParam(\"transPage\");\r\n  var organCode = getUrlParam(\"organCode\");\r\n  if (token) {\r\n    $.cookie(\"_token_\", token, {\r\n      path: '/',\r\n      expires: 10\r\n    });\r\n    // window.sessionStorage.setItem(\"_token_\", token);\r\n  }\r\n  if (organCode) {\r\n    window.sessionStorage.setItem(\"_organCode_\", organCode);\r\n  }\r\n  if (transLogoutFun) {\r\n    window.sessionStorage.setItem(\"_transLogout_\", JSON.stringify({ 'transPage': transPage, 'transLogoutFun': transLogoutFun }));\r\n    window.exec_iframe_login = exec_iframe_login;\r\n  }\r\n}\r\n\r\n/*获取医院组织机构码*/\r\nexport function getOrganCode() {\r\n  return window.sessionStorage.getItem(\"_organCode_\") || getUrlParam('organCode');\r\n}\r\n\r\n/**\r\n * 根据年龄字符串 计算年龄对应字段信息\r\n * @param {string} age 年龄\r\n * @returns {object} year-岁 month-月 day-天 age-完整年龄展示\r\n */\r\nexport function calculateAge(age) {\r\n  // 年龄信息\r\n  var ageInfo = {\r\n    year: '', // 岁\r\n    month: '', // 月\r\n    day: '', // 天\r\n    age: '' // 完整年龄展示\r\n  }\r\n  // 年龄为空时 认为成年人\r\n  if (!age) {\r\n    ageInfo.year = 'adult'\r\n    ageInfo.age = '未知'\r\n    return ageInfo\r\n  }\r\n  // 将字符串中所有「个」替换为空\r\n  age = age.replace(/个/g, '')\r\n  // 年字符串所在位置\r\n  var yearFlag = age.indexOf('岁')\r\n  // 月字符串所在位置\r\n  var monthFlag = age.indexOf('月')\r\n  // 天字符串所在位置\r\n  var dayFlag = age.indexOf('天')\r\n  // 截取年字符串后内容\r\n  var yearEnd = age.substring(yearFlag + 1, age.length)\r\n  // 截取月字符串后内容\r\n  var monthEnd = age.substring(monthFlag + 1, age.length)\r\n\r\n  // 年龄字符为纯数字或者只含有岁字符时 认为年龄为X岁 示例：X、X岁\r\n  if ((yearFlag === -1 && monthFlag === -1 && dayFlag === -1) || (yearFlag > -1 && monthFlag === -1 && dayFlag === -1 && !yearEnd)) {\r\n    ageInfo.year = yearFlag > -1 ? age.substring(0, yearFlag) : age\r\n\r\n    ageInfo.age = ageInfo.year + '岁'\r\n    return ageInfo\r\n  }\r\n  // 年龄字符同时含有岁和月字符或者只含有岁字符但是岁字符后面还有数字时 认为年龄为X岁X月 示例：X岁X月 X岁X\r\n  if ((yearFlag > -1 && monthFlag > -1 && dayFlag === -1 && !monthEnd) || (yearFlag > -1 && monthFlag === -1 && dayFlag === -1 && yearEnd)) {\r\n    ageInfo.year = age.substring(0, yearFlag)\r\n    ageInfo.month = monthFlag > -1 ? age.substring(yearFlag + 1, monthFlag) : yearEnd\r\n\r\n    ageInfo.age = ageInfo.year + '岁' + ageInfo.month + '个月'\r\n    return ageInfo\r\n  }\r\n  // 年龄字符同时含有岁和天字符时 认为年龄为X岁X天 示例：X岁X天\r\n  if (yearFlag > -1 && monthFlag === -1 && dayFlag > -1) {\r\n    ageInfo.year = age.substring(0, yearFlag)\r\n    ageInfo.month = '0'\r\n    ageInfo.day = age.substring(yearFlag + 1, dayFlag)\r\n\r\n    ageInfo.age = ageInfo.year + '岁' + ageInfo.day + '天'\r\n    return ageInfo\r\n  }\r\n  // 年龄字符同时含有岁、月、天字符或者只含有岁、月字符但是月字符后面还有数字时 认为年龄为X岁X月X天 示例：X岁X月X天 X岁X月X\r\n  if ((yearFlag > -1 && monthFlag > -1 && dayFlag > -1) || (yearFlag > -1 && monthFlag > -1 && dayFlag === -1 && monthEnd)) {\r\n    ageInfo.year = age.substring(0, yearFlag)\r\n    ageInfo.month = age.substring(yearFlag + 1, monthFlag)\r\n    ageInfo.day = dayFlag > -1 ? age.substring(monthFlag + 1, dayFlag) : monthEnd\r\n\r\n    ageInfo.age = ageInfo.year + '岁' + ageInfo.month + '个月' + ageInfo.day + '天'\r\n    return ageInfo\r\n  }\r\n  // 年龄字符只含有月字符时 认为年龄为0岁X个月 示例：X月\r\n  if (yearFlag === -1 && monthFlag > -1 && dayFlag === -1 && !monthEnd) {\r\n    ageInfo.year = '0'\r\n    ageInfo.month = age.substring(0, monthFlag)\r\n\r\n    ageInfo.age = ageInfo.month + '个月'\r\n    return ageInfo\r\n  }\r\n  // 年龄字符同时含有月和天字符或者只含有月字符但是月字符后面还有数字时 认为年龄为X月X天 示例：X月X天 X月X\r\n  if ((yearFlag === -1 && monthFlag > -1 && dayFlag > -1) || (yearFlag === -1 && monthFlag > -1 && dayFlag === -1 && monthEnd)) {\r\n    ageInfo.year = '0'\r\n    ageInfo.month = age.substring(0, monthFlag)\r\n    ageInfo.day = dayFlag > -1 ? age.substring(monthFlag + 1, dayFlag) : monthEnd\r\n\r\n    ageInfo.age = ageInfo.month + '个月' + ageInfo.day + '天'\r\n    return ageInfo\r\n  }\r\n  // 年龄字符只含有天字符时 认为年龄为0岁0个月X天\r\n  if (yearFlag === -1 && monthFlag === -1 && dayFlag > -1) {\r\n    ageInfo.year = '0'\r\n    ageInfo.month = '0'\r\n    ageInfo.day = age.substring(0, dayFlag)\r\n\r\n    ageInfo.age = ageInfo.day + '天'\r\n    return ageInfo\r\n  }\r\n};\r\n\r\n/*base64转file，主要用于文件上传*/\r\nexport function transformBase64ToFile(base64Url, imageType) {\r\n  let base64 = base64Url.split(',');\r\n  // 处理不带data:image/png;base64,的数据\r\n  let binary = window.atob(base64.length > 1 ? base64[1] : base64[0]);\r\n  let array = [];\r\n  for (var i = 0; i < binary.length; i++) {\r\n    array.push(binary.charCodeAt(i));\r\n  }\r\n  let bigImge = new Blob([new Uint8Array(array)], { type: imageType });\r\n  let form = document.forms[0];\r\n  let formData = new FormData(form);\r\n  let timestamp = new Date().getTime();\r\n  formData.append('key', timestamp + '.png');\r\n  formData.append(\"imageName\", bigImge)\r\n  return formData;\r\n}\r\n\r\nexport function getUserInfo(){\r\n  return {\r\n    userId:$.cookie('_loginName_'),\r\n    userName:$.cookie('_staffName_')\r\n  }\r\n}\r\n\r\n\r\n/*根据页面来源判断病人类型*/\r\nexport function getPatientSourceType(pageFrom) {\r\n  let result = \"\";\r\n  if (pageFrom == 'patientinfo') {\r\n    result = 'IH';\r\n  } else if (pageFrom == 'emergencyNursing') {\r\n    result = 'ET';\r\n  } else {\r\n    result = 'OD';\r\n  }\r\n  return result;\r\n}\r\n\r\n/*图片转base64*/\r\nexport function getBase64Image(img) {\r\n  var canvas = document.createElement(\"canvas\");\r\n  canvas.width = img.width;\r\n  canvas.height = img.height;\r\n  var ctx = canvas.getContext(\"2d\");\r\n  ctx.drawImage(img, 0, 0, img.width, img.height);\r\n  var ext = img.src.substring(img.src.lastIndexOf(\".\") + 1).toLowerCase();\r\n  var dataURL = canvas.toDataURL(\"image/\" + ext);\r\n  return dataURL;\r\n}\r\n\r\n\r\nexport function convertImgToBase64(url, outputFormat) {\r\n  //downLoadImg(url);\r\n  //return;\r\n  return new Promise((resolve,reject) => {\r\n    var canvas = document.createElement('CANVAS'),\r\n          ctx = canvas.getContext('2d'),\r\n          img = new Image;  \r\n    img.crossOrigin = '*';  \r\n    img.onload = function() {    \r\n      canvas.height = img.height;    \r\n      canvas.width = img.width;    \r\n      ctx.drawImage(img, 0, 0);    \r\n      var dataURL = canvas.toDataURL(outputFormat || 'image/png');\r\n      // callback.call(this, dataURL);    \r\n      canvas = null; \r\n      resolve(dataURL); \r\n    };  \r\n    img.src = url;\r\n  })  \r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/util/common_b.js","\n/* styles */\nrequire(\"!!../../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-4f2fecc0\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./patient.vue\")\n\nvar Component = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./patient.vue\"),\n  /* template */\n  require(\"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4f2fecc0\\\"}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./patient.vue\"),\n  /* scopeId */\n  \"data-v-4f2fecc0\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/questionTemp/common/patient.vue\n// module id = 228\n// module chunks = 27","<template>\r\n  <div class=\"lv-inline\">\r\n    <div class=\"lv-item lv-title ttt\" v-if=\"node.currNode.aliasType != 3\" :style=\"{'width':nodeWidth(node.currNode.style.width)+'px','margin-left':'5px'}\">{{node.currNode|showNodeName}}<span v-if=\"showPrintCode\" style=\"color:red\" :title=\"node.currNode.uniqueId\">{{node.currNode.uniqueId}}</span>\r\n    </div>\r\n    <div class=\"lv-inline\">\r\n      <div class=\"lv-item\" v-for=\"item in node.currNode.optionList\">\r\n        <template>\r\n          <template v-if=\"node.currNode.questionType!=10\">\r\n            <div class=\"am-input-unit\">\r\n              <template v-if=\"item.implantStyle != 1\">\r\n                <input type=\"text\" v-if=\"!item.style||item.style.height != 2\" class=\"input-text\" :value=\"getValueById(item,node)\" @input=\"checkInputUnit(item,node,$event)\" :maxLength=\"item.style&&item.style.maxLength||100\" :style=\"{'padding-right':item.unitList.length!=1?'0':item.unitList[0].unitName.length*12+10+'px','width':(item.style.width || 220)+'px','margin-left':(item.style.margin || 0) + 'px','min-width':'220px'}\" disabled='disabled'>\r\n                <textarea rows=\"4\" v-if=\"item.style&&item.style.height == 2\" class=\"input-text input-textarea\" :value=\"getValueById(item,node)\" @input=\"checkInputUnit(item,node,$event)\" :maxLength=\"item.style&&item.style.maxLength||100\" :style=\"{'padding-right':0,'width':(item.style.width || 220)+'px','margin-left':(item.style.margin || 0) + 'px',}\" :disabled=\"isTreeDisabled\">\r\n                </textarea>\r\n              </template>\r\n              <template v-if=\"item.implantStyle == 1\">\r\n                <span :style=\"{'margin-left':(item.style.margin || 0) + 'px','width':(item.style&&item.style.width || 220)+'px','text-decoration':'underline'}\">{{getValueById(item,node)}}</span>\r\n              </template>\r\n              <i v-if=\"item.unitList.length == 1\">{{item.unitList[0].unitName}}</i>\r\n            </div>\r\n            <template v-if=\"item.unitList.length>1\">\r\n              <div class=\"am-btn-rdo am-ml-10\" v-if=\"showUnit\">\r\n                <a v-for=\"(it,index) in item.unitList\" v-bind:class=\"{active:isUnitCodeSel(node.currNode,item,it.unitCode)}\" @click=\"checkRadioUnit(node,item,it)\">{{it.unitName}}</a>\r\n              </div>\r\n            </template>\r\n          </template>\r\n          <template v-if=\"node.currNode.questionType==10\">\r\n            <div @click=\"checkRadio(item)\" :style=\"{'width':(item.style.width || 220)+'px','margin-left':(item.style.margin || 0) + 'px',}\">\r\n              <div class=\"am-ctr-native-rdo\" :class=\"{active:isIdSelected(node.currNode,item.optionId),disabled:isTreeDisabled}\">\r\n                <span> {{item|showNodeName}}</span>\r\n              </div>\r\n            </div>\r\n          </template>\r\n          <span v-if=\"showPrintCode\" :title=\"item.optionId\">{{item.optionId}}</span>\r\n        </template>\r\n        <!-- 查看 -->\r\n        <!-- <template v-if=\"mode=='pageShow'\">\r\n          <span :style=\"{'padding-right':item.unitList.length!=1?'0':item.unitList[0].unitName.length*12+10+'px','width':nodeWidth(item.style.width)+'px'}\">{{getValueById(item,node)}}</span>\r\n        </template> -->\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { mapState } from 'vuex'\r\nimport questionNodeMixin from '@/components/questionTree/questionNode/questionNodeMix';\r\nimport bus from \"@/bus.js\"\r\nimport { calculateAge, ajaxAsync,getUrlParam } from '@/util/common_b';\r\nimport { DIAGTYPE } from '@/util/config';\r\n\r\nexport default {\r\n    name: 'patient',\r\n    mixins: [questionNodeMixin],\r\n    props: ['node', 'saveValue', 'mode'],\r\n    data() {\r\n        return {}\r\n    },\r\n    mounted: function() {\r\n        if (!this.saveValue[this.node.currNode.uniqueId] && !(this.mode == 'add' && this.isTreeDisabled)) {\r\n            if (this.node.currNode.questionType != 10) {\r\n                this.setInitData();\r\n            } else {\r\n                this.setInitRadio();\r\n            }\r\n        }\r\n    },\r\n    computed: {\r\n        ...mapState([\r\n            'patient', 'userfulWidth', 'showPrintCode'\r\n        ]),\r\n        /*获取单选、多选的扩展文本框内容*/\r\n        getValue: function() {\r\n            let node = this.node;\r\n            let uniqueId = node.currNode.uniqueId;\r\n            let svl = this.saveValue[uniqueId] && this.saveValue[uniqueId].find(sv => {\r\n                return sv.isShow && sv.selfPropagationId == node.currNode.selfPropagationId;\r\n            })\r\n            if (svl) {\r\n                return svl.optionContent;\r\n            } else {\r\n                if (node.currNode.questionType == 90) {\r\n                    return new Date().format(item.timeFormat);\r\n                } else {\r\n                    return \"\";\r\n                }\r\n            }\r\n        },\r\n        isDisabled: function() {\r\n            return this.node.currNode.childTemplateId === 'PAT_INDEX_NO' || this.node.currNode.paperTemplateId === 'ORGAN_CODE'\r\n        }\r\n    },\r\n    methods: {\r\n        /*初始化填空题值*/\r\n        setInitData: async function() {\r\n            let value;\r\n            let currNode = this.node.currNode;\r\n            let map = {\r\n                BED_NO: 'bedNo',\r\n                MRN: 'mrn',\r\n                PAT_INDEX_NO: 'patIndexNo',\r\n                PATIENT_NAME: 'name',\r\n                SEX: 'physiSexName',\r\n                //DIAGNOSE: 'diagnosisName',\r\n                WARD_CODE: 'wardName',\r\n                DEPT_CODE: 'deptName',\r\n                ADMISSTION_TIME: 'admissionTime',\r\n                BIRTHYDAY: 'birthDate',\r\n                VISIT_CARD_NO: 'visitCardNo',\r\n                EMC_PATIENT_NAME: 'patientName',\r\n                EMC_DIAGNOSE: 'diagnosis',\r\n                DOCTOR_RECEPTION_TIME: 'receptTreatDrTime'\r\n            }\r\n            if (currNode.childTemplateId === 'AGE') {\r\n                let age = calculateAge(this.patient.ageHis);\r\n                if (age.noAgeHis) {\r\n                    value = this.patient.age;\r\n                } else {\r\n                    value = age.age;\r\n                }\r\n\r\n            } else if (currNode.childTemplateId === 'NURSING_CLASS') {\r\n                value = this.calculateNursingClass(this.patient.nursingClass);\r\n            } else if (currNode.childTemplateId === 'NURSING_CLASS') {\r\n                value = this.patient[map[currNode.childTemplateId]] || new Date().format('yyyy-MM-dd hh:mm:ss');\r\n            } /*else if (currNode.childTemplateId === 'DIAGNOSE') {\r\n                value = await this.getDiagnosis();\r\n            } */else {\r\n                value = this.patient[map[currNode.childTemplateId]] || '';\r\n            }\r\n            this.tree.$emit('seleteInput', {\r\n                'node': this.node,\r\n                'item': currNode.optionList[0],\r\n                'value': value\r\n            });\r\n        },\r\n        /*获取入院诊断信息*/\r\n        getDiagnosis: async function() {\r\n            let resultsArr =  await ajaxAsync({\r\n                url: \"baseinfo2.0/inhospdiagnosis/inhospdiagnosis\",\r\n                dataType: \"json\",\r\n                type: \"get\",\r\n                data: {\r\n                    diagTypeCodeList: DIAGTYPE.AD,\r\n                    organCode: getUrlParam(\"organCode\"),\r\n                    patIndexNo:this.patient.patIndexNo\r\n                }\r\n            });\r\n            let result = \"\";\r\n            resultsArr&&resultsArr.forEach((res,index)=>{\r\n                result += (index?',':'') + res.diagName\r\n            })\r\n            return result;\r\n        },\r\n        /*选项型默认值*/\r\n        setInitRadio: function() {\r\n            let currNode = this.node.currNode;\r\n            let map = {\r\n                ADMITION_WAY: 'admitWayCode',\r\n                CLASSIFICATION: 'triageLevel'\r\n            }\r\n            let selOp = this.node.currNode.optionList.find(op => {\r\n                return op.relateValue == this.patient[map[currNode.childTemplateId]]\r\n            })\r\n            if (selOp) {\r\n                this.checkRadio(selOp);\r\n            }\r\n        },\r\n        // 单选选中\r\n        checkRadio(item) {\r\n            if (this.isTreeDisabled) {\r\n                return;\r\n            }\r\n            this.tree.$emit('seleteRadio', {\r\n                node: this.node,\r\n                item: item\r\n            });\r\n        },\r\n        checkInputUnit(node, event) {\r\n            this.tree.$emit('seleteInput', {\r\n                'node': node,\r\n                'item': node.currNode,\r\n                'value': event.currentTarget.value,\r\n            });\r\n        },\r\n        /*护理等级特殊处理*/\r\n        calculateNursingClass: function(nursingClass) {\r\n            let nursingInfo = '';\r\n            if (nursingClass == 0) {\r\n                nursingInfo = \"特级护理\";\r\n            } else if (nursingClass == 1) {\r\n                nursingInfo = \"一级护理\";\r\n            } else if (nursingClass == 2) {\r\n                nursingInfo = \"二级护理\";\r\n            } else if (nursingClass == 3) {\r\n                nursingInfo = \"三级护理\";\r\n            }\r\n            return nursingInfo;\r\n        }\r\n    }\r\n}\r\n\r\n</script>\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// patient.vue?b4c44836","/*常用字符串定义*/\r\n\r\n/*诊断类型*/\r\nexport const DIAGTYPE = {\r\n  AD: 6, //入院诊断\r\n  TD: 3 //初步诊断\r\n}\r\n\r\n/*初始接口查询类型*/\r\nexport const INIT_QUERY_TYPE = {\r\n  LINK_LAST: \"LINK_LAST\",//取上次评估部分数据\r\n  RECORD_PERMISSTION: \"RECORD_PERMISSTION\",//权限\r\n  SYSTEM_TIME: \"SYSTEM_TIME\",/*服务器时间*/\r\n  SHARE_DATA: \"SHARE_DATA\"//共享数据\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/config.js","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\", {\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"file\":\"patient.vue\",\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-4f2fecc0\",\"scoped\":true,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/components/questionTemp/common/patient.vue\n// module id = 569\n// module chunks = 27","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/index.js?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"id\\\":\\\"data-v-4f2fecc0\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./patient.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"1a1a248c\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/vue-style-loader!./~/css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-4f2fecc0\",\"scoped\":true,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/components/questionTemp/common/patient.vue\n// module id = 593\n// module chunks = 27","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"lv-inline\"\n  }, [(_vm.node.currNode.aliasType != 3) ? _c('div', {\n    staticClass: \"lv-item lv-title ttt\",\n    style: ({\n      'width': _vm.nodeWidth(_vm.node.currNode.style.width) + 'px',\n      'margin-left': '5px'\n    })\n  }, [_vm._v(_vm._s(_vm._f(\"showNodeName\")(_vm.node.currNode))), (_vm.showPrintCode) ? _c('span', {\n    staticStyle: {\n      \"color\": \"red\"\n    },\n    attrs: {\n      \"title\": _vm.node.currNode.uniqueId\n    }\n  }, [_vm._v(_vm._s(_vm.node.currNode.uniqueId))]) : _vm._e()]) : _vm._e(), _vm._v(\" \"), _c('div', {\n    staticClass: \"lv-inline\"\n  }, _vm._l((_vm.node.currNode.optionList), function(item) {\n    return _c('div', {\n      staticClass: \"lv-item\"\n    }, [\n      [(_vm.node.currNode.questionType != 10) ? [_c('div', {\n        staticClass: \"am-input-unit\"\n      }, [(item.implantStyle != 1) ? [(!item.style || item.style.height != 2) ? _c('input', {\n        staticClass: \"input-text\",\n        style: ({\n          'padding-right': item.unitList.length != 1 ? '0' : item.unitList[0].unitName.length * 12 + 10 + 'px',\n          'width': (item.style.width || 220) + 'px',\n          'margin-left': (item.style.margin || 0) + 'px',\n          'min-width': '220px'\n        }),\n        attrs: {\n          \"type\": \"text\",\n          \"maxLength\": item.style && item.style.maxLength || 100,\n          \"disabled\": \"disabled\"\n        },\n        domProps: {\n          \"value\": _vm.getValueById(item, _vm.node)\n        },\n        on: {\n          \"input\": function($event) {\n            _vm.checkInputUnit(item, _vm.node, $event)\n          }\n        }\n      }) : _vm._e(), _vm._v(\" \"), (item.style && item.style.height == 2) ? _c('textarea', {\n        staticClass: \"input-text input-textarea\",\n        style: ({\n          'padding-right': 0,\n          'width': (item.style.width || 220) + 'px',\n          'margin-left': (item.style.margin || 0) + 'px',\n        }),\n        attrs: {\n          \"rows\": \"4\",\n          \"maxLength\": item.style && item.style.maxLength || 100,\n          \"disabled\": _vm.isTreeDisabled\n        },\n        domProps: {\n          \"value\": _vm.getValueById(item, _vm.node)\n        },\n        on: {\n          \"input\": function($event) {\n            _vm.checkInputUnit(item, _vm.node, $event)\n          }\n        }\n      }) : _vm._e()] : _vm._e(), _vm._v(\" \"), (item.implantStyle == 1) ? [_c('span', {\n        style: ({\n          'margin-left': (item.style.margin || 0) + 'px',\n          'width': (item.style && item.style.width || 220) + 'px',\n          'text-decoration': 'underline'\n        })\n      }, [_vm._v(_vm._s(_vm.getValueById(item, _vm.node)))])] : _vm._e(), _vm._v(\" \"), (item.unitList.length == 1) ? _c('i', [_vm._v(_vm._s(item.unitList[0].unitName))]) : _vm._e()], 2), _vm._v(\" \"), (item.unitList.length > 1) ? [(_vm.showUnit) ? _c('div', {\n        staticClass: \"am-btn-rdo am-ml-10\"\n      }, _vm._l((item.unitList), function(it, index) {\n        return _c('a', {\n          class: {\n            active: _vm.isUnitCodeSel(_vm.node.currNode, item, it.unitCode)\n          },\n          on: {\n            \"click\": function($event) {\n              _vm.checkRadioUnit(_vm.node, item, it)\n            }\n          }\n        }, [_vm._v(_vm._s(it.unitName))])\n      })) : _vm._e()] : _vm._e()] : _vm._e(), _vm._v(\" \"), (_vm.node.currNode.questionType == 10) ? [_c('div', {\n        style: ({\n          'width': (item.style.width || 220) + 'px',\n          'margin-left': (item.style.margin || 0) + 'px',\n        }),\n        on: {\n          \"click\": function($event) {\n            _vm.checkRadio(item)\n          }\n        }\n      }, [_c('div', {\n        staticClass: \"am-ctr-native-rdo\",\n        class: {\n          active: _vm.isIdSelected(_vm.node.currNode, item.optionId), disabled: _vm.isTreeDisabled\n        }\n      }, [_c('span', [_vm._v(\" \" + _vm._s(_vm._f(\"showNodeName\")(item)))])])])] : _vm._e(), _vm._v(\" \"), (_vm.showPrintCode) ? _c('span', {\n        attrs: {\n          \"title\": item.optionId\n        }\n      }, [_vm._v(_vm._s(item.optionId))]) : _vm._e()]\n    ], 2)\n  }))])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-4f2fecc0\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/questionTemp/common/patient.vue\n// module id = 678\n// module chunks = 27"],"sourceRoot":""}