webpackJsonp([33],{204:function(e,t,n){"use strict";(function(e){function o(e,t,n){layer.msg(e||"操作成功！",{time:t||1e3},function(){n&&n()})}function r(e,t,n){return layer.open({style:"background-color:rgba(0,0,0,0.8);color:white;max-width:70%;width:auto;border-radius: 4px;",shade:"background-color: rgba(0,0,0,0)",content:e||"error",time:t||2e3,end:function(){n&&n()}})}function i(t){return t.hideLayer=void 0==t.hideLayer||t.hideLayer,e.cookie("_token_")?t.headers={Authorization:"Bearer "+e.cookie("_token_")}:t.headers={},new x.a(function(n,i){var s="?";t.url.indexOf("?")>-1&&(s="&"),e.ajax({type:t.type||"post",url:"/"+t.url+(t.cache?"":s+"random="+Math.random()),cache:t.cache||!1,dataType:t.dataType||"json",beforeSend:function(n){t.isLogin||n.setRequestHeader("Authorization","Bearer "+e.cookie("_token_"))},contentType:t.content_type||"application/json",timeout:t.timeout||1e4,async:void 0==t.async||t.async,data:t.data||{},headers:t.headers,complete:function(){t.noHideLoading||layer.closeAll("loading")},success:function(e){t.noHideLoading||layer.closeAll("loading"),e&&(e.error_code||""==e.error_code)?i(e):n(e)},error:function(e,n,s){if(t.noHideLoading||layer.closeAll("loading"),t.hideLayer&&layer.closeAll(),"first"===t.is_failure)return void i(e);if("500"==e.status||"401"==e.status){var u=JSON.parse(e.responseText);"10000"==u.code?r("系统异常，请稍后再试！"):"20401"==u.code||"10007"==u.code?o("请重新登录！",null,function(){a()}):"invalid_token"==u.error?a():t.showFailure||r(u.message)}else{try{layer.close(f)}catch(e){}r("系统异常，请稍后再试！")}i(e)}})})}function a(){e.cookie("_id_","",{path:"/",expires:-1}),e.cookie("_un_","",{path:"/",expires:-1}),e.cookie("_ut_","",{path:"/",expires:-1}),e.cookie("_token_","",{path:"/",expires:-1}),window.sessionStorage.getItem("_transLogout_")?d():window.top.location.href=s()+"/user/html/login.html"}function s(){var t=void 0;try{t=window.top.location.href}catch(e){t=window.location.href}return u("platformUrl",t)||e.cookie("_platformUrl_")}function u(e,t){var n="",o=t||window.location.href;if(o.indexOf("?")>-1){var r=o.substring(o.indexOf("?")+1);if(e+="=",r.indexOf(e)>-1){var i=r.substr(r.indexOf(e)+e.length);-1!=i.indexOf("&")&&(i=i.substring(0,i.indexOf("&"))),n=i}}return decodeURIComponent(n)}function d(){var e=JSON.parse(window.sessionStorage.getItem("_transLogout_")),t=unescape(e.transPage),n=e.transLogoutFun;if("undefined"==typeof exec_obj){var o=document.createElement("iframe");o.id="transIframe",o.name="transIframe",o.src=t+"?transFun="+n,o.style.display="none",document.body.appendChild(o)}else exec_obj.src=t+"?transFun="+n+"&random="+Math.random();"function"==typeof parent.exec_iframe_login&&parent.exec_iframe_login()}function c(){return window.sessionStorage.getItem("_organCode_")||u("organCode")}function l(e){var t={year:"",month:"",day:"",age:""};if(!e)return t.year="adult",t.age="未知",t;e=e.replace(/个/g,"");var n=e.indexOf("岁"),o=e.indexOf("月"),r=e.indexOf("天"),i=e.substring(n+1,e.length),a=e.substring(o+1,e.length);return-1===n&&-1===o&&-1===r||n>-1&&-1===o&&-1===r&&!i?(t.year=n>-1?e.substring(0,n):e,t.age=t.year+"岁",t):n>-1&&o>-1&&-1===r&&!a||n>-1&&-1===o&&-1===r&&i?(t.year=e.substring(0,n),t.month=o>-1?e.substring(n+1,o):i,t.age=t.year+"岁"+t.month+"个月",t):n>-1&&-1===o&&r>-1?(t.year=e.substring(0,n),t.month="0",t.day=e.substring(n+1,r),t.age=t.year+"岁"+t.day+"天",t):n>-1&&o>-1&&r>-1||n>-1&&o>-1&&-1===r&&a?(t.year=e.substring(0,n),t.month=e.substring(n+1,o),t.day=r>-1?e.substring(o+1,r):a,t.age=t.year+"岁"+t.month+"个月"+t.day+"天",t):-1===n&&o>-1&&-1===r&&!a?(t.year="0",t.month=e.substring(0,o),t.age=t.month+"个月",t):-1===n&&o>-1&&r>-1||-1===n&&o>-1&&-1===r&&a?(t.year="0",t.month=e.substring(0,o),t.day=r>-1?e.substring(o+1,r):a,t.age=t.month+"个月"+t.day+"天",t):-1===n&&-1===o&&r>-1?(t.year="0",t.month="0",t.day=e.substring(0,r),t.age=t.day+"天",t):void 0}function p(e,t){for(var n=e.split(","),o=window.atob(n.length>1?n[1]:n[0]),r=[],i=0;i<o.length;i++)r.push(o.charCodeAt(i));var a=new Blob([new Uint8Array(r)],{type:t}),s=document.forms[0],u=new FormData(s),d=(new Date).getTime();return u.append("key",d+".png"),u.append("imageName",a),u}t.b=r,t.a=i,t.e=u,t.d=c,t.f=l,t.c=p;var f,h=n(61),m=(n.n(h),n(28)),g=n.n(m),y=n(27),v=n.n(y),w=n(31),x=n.n(w),_=n(33);n.n(_),function(){var e=v()(g.a.mark(function e(){var t;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="",e.prev=1,e.next=4,i({url:"enr2.0/sys/date",type:"post",is_failure:"first",dataType:"text"});case 4:t=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),t=(new Date).format("yyyy-MM-dd hh:mm:ss");case 10:return e.abrupt("return",t);case 11:case"end":return e.stop()}},e,this,[[1,7]])}))}()}).call(t,n(4))},350:function(e,t,n){n(600);var o=n(26)(n(515),n(694),null,null);e.exports=o.exports},515:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){var o=n(166),r=n.n(o),i=n(28),a=n.n(i),s=n(27),u=n.n(s),d=n(60),c=n(164),l=n(204);t.default={name:"userNursing",mixins:[c.a],props:["node","saveValue"],data:function(){return{selectList:[],isComboOpen:!1,content:""}},mounted:function(){function e(){return t.apply(this,arguments)}var t=u()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.content=this.getValue;case 1:case"end":return e.stop()}},e,this)}));return e}(),computed:r()({},n.i(d.b)(["patient","userfulWidth"]),{getValue:function(){var e=this,t=this.saveValue[this.node.currNode.uniqueId]&&this.saveValue[this.node.currNode.uniqueId].filter(function(t){return t.isShow&&t.selfPropagationId==e.node.currNode.selfPropagationId});if(t){return t.reduce(function(e,t,n){return e+(n?"/":"")+(t.optionContent?t.optionContent:"")},"")||""}return""}}),methods:{showComboOpen:function(e){this.isComboOpen=!0,this.dir(e)},dir:function(t){var n=e(t).next(".am-dropdown").addClass("before");n.innerWidth();n.innerHeight()<e(".amp-confirm-scroll").innerHeight()-(e(t).offset().top-e(".amp-confirm-scroll").offset().top)-30||e(t).next(".am-dropdown").addClass("dir-top"),n.removeClass("before")},hideComboOpen:function(){var e=this;if(this.isComboOpen=!1,this.content!=this.getValue){var t=this.saveValue[this.node.currNode.uniqueId]&&this.saveValue[this.node.currNode.uniqueId].filter(function(t){return t.isShow&&t.selfPropagationId==e.node.currNode.selfPropagationId});t&&this.tree.$emit("seleteRadio",{node:this.node,item:{optionKey:t.optionKey,optionContent:t.optionContent,selfPropagationId:this.node.currNode.selfPropagationId},isCancel:!0})}this.content=this.getValue},isKeySelected:function(e,t){if(!this.saveValue[e.uniqueId])return!1;return this.saveValue[e.uniqueId].find(function(n){return n.isShow&&n.optionKey==t&&n.selfPropagationId==e.selfPropagationId})},checkRadio:function(e){this.isComboOpen=!1,this.tree.$emit("seleteRadio",{node:this.node,item:{optionKey:e.key,optionContent:e.value,selfPropagationId:this.node.currNode.selfPropagationId}}),this.selectList=[],this.content=this.getValue},searchUser:function(e){var t=this;return u()(a.a.mark(function o(){var r,i,s;return a.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return r=e.currentTarget,o.next=4,n.i(l.a)({url:"sys-service/sys/v1/users",dataType:"json",data:{organCode:n.i(l.d)(),pageNumber:0,pageSize:1e3,codeOrName:e.currentTarget.value},type:"get"});case 4:i=o.sent,t.selectList=i.content.map(function(e){return{key:e.loginName,value:e.staffName}}),s=t,t.$nextTick(function(){s.showComboOpen(r)});case 8:case"end":return o.stop()}},o,t)}))()}},watch:{}}}.call(t,n(4))},576:function(e,t,n){t=e.exports=n(140)(!0),t.push([e.i,".lv-inline:{font-size:14px}.before{top:-999px;left:-999px}.dir-top{top:auto;bottom:30px;transform-origin:100% 100%}","",{version:3,sources:["/Users/zhanghongsong/Ewell/JSSRMknowledge/src/components/questionTemp/common/userNursing.vue"],names:[],mappings:"AACA,YACE,cAAgB,CACjB,AACD,QACE,WAAY,AACZ,WAAa,CACd,AACD,SACE,SAAU,AACV,YAAa,AACb,0BAA4B,CAC7B",file:"userNursing.vue",sourcesContent:["\n.lv-inline: {\r\n  font-size: 14px;\n}\n.before {\r\n  top: -999px;\r\n  left: -999px;\n}\n.dir-top {\r\n  top: auto;\r\n  bottom: 30px;\r\n  transform-origin: 100% 100%;\n}\r\n\r\n"],sourceRoot:""}])},600:function(e,t,n){var o=n(576);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);n(141)("791cded6",o,!0)},694:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"lv-inline"},[3!=e.node.currNode.aliasType?n("div",{staticClass:"lv-item lv-title",style:{"margin-left":"5px",width:e.nodeWidth(e.node.currNode.style.width)+"px"}},[e._v("\n    "+e._s(e._f("showNodeName")(e.node.currNode))+"\n  ")]):e._e(),e._v(" "),n("div",{staticClass:"lv-inline"},["pageShow"!=e.mode?e._l(e.node.currNode.optionList,function(t){return n("div",{staticClass:"am-search-picker lv-item",style:{width:e.nodeWidth(e.node.currNode.optionList.length>0&&e.node.currNode.optionList[0].style.width)+"px","margin-left":(e.node.currNode.optionList[0].style.margin||0)+"px"},on:{mouseleave:e.hideComboOpen}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.content,expression:"content"}],staticClass:"input-text",style:{width:e.nodeWidth(t.style.width)+"px","margin-left":(e.item.style.margin||10)+"px"},attrs:{type:"text"},domProps:{value:e.content},on:{input:[function(t){t.target.composing||(e.content=t.target.value)},function(t){t.stopPropagation(),e.searchUser(t)}]}}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isComboOpen,expression:"isComboOpen"}],staticClass:"am-dropdown",staticStyle:{display:"block"}},[n("ul",e._l(e.selectList,function(t,o){return n("li",{class:{active:e.isKeySelected(e.node.currNode,t.key)},on:{click:function(n){n.stopPropagation(),e.checkRadio(t)}}},[n("a",[e._v(" "+e._s(t.key)+"/"+e._s(t.value))])])}))])])}):e._e(),e._v(" "),e._l(e.node.currNode.optionList,function(t){return"pageShow"==e.mode?[n("div",{staticClass:"lv-item"},[n("span",{style:{width:e.nodeWidth(t.style.width)+"px","margin-left":(t.style.margin||0)+"px"}},[e._v(e._s(e.getValue))])])]:e._e()})],2)])},staticRenderFns:[]}}});
//# sourceMappingURL=33.96ee7b912c0b74e71b0f.js.map